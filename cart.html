<!DOCTYPE html>
<!-- saved from url=(0049)https://getbootstrap.com/docs/4.3/examples/album/ -->
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <title>eMercado - Todo lo que busques está aquí</title>

  <link rel="canonical" href="https://getbootstrap.com/docs/4.3/examples/album/">
  <link href="https://fonts.googleapis.com/css?family=Raleway:300,300i,400,400i,700,700i,900,900i" rel="stylesheet">

  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }
  </style>
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/styles.css" rel="stylesheet">
  <link href="css/dropzone.css" rel="stylesheet">
  <script src="https://kit.fontawesome.com/a4ade8a60a.js" crossorigin="anonymous"></script>
</head>

<body>
  <nav class="site-header sticky-top py-1 bg-dark">
    <div class="container d-flex flex-column flex-md-row justify-content-between">
      <a class="py-2 d-none d-md-inline-block" href="cover.html">Inicio</a>
      <a class="py-2 d-none d-md-inline-block" href="categories.html">Categorías</a>
      <a class="py-2 d-none d-md-inline-block" href="products.html">Productos</a>
      <a class="py-2 d-none d-md-inline-block" href="sell.html">Vender</a>
      <div> <!--menú desplegable en el nombre de usuario-->
        <div class="dropdown">
        <img src="img/user.jpg" alt="" style="z-index: 5px; width: 22px; height: 25px; opacity: 70%;">
        <a class="py-2 d-none d-md-inline-block dropdown-toggle" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="userLogueado" style="color:white;"></a>
        <!-- puntos del menú: por ahora solo funciona el cerrar sesión,y la redirección del carrito -->
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <a class="dropdown-item" href="#">Mi perfil</a>
            <a class="dropdown-item" href="cart.html">Mi carrito  <span class="badge badge-pill badge-primary" id="badgeCarrito"></span></a>
            <a class="dropdown-item" onclick="olvidar();" href="index.html">Cerrar Sesión</a>
          </div>
        </div>

      <script>//obtengo el usuario ingresado en el login
        var nomDeUsuer = localStorage.getItem("usuario");
        document.getElementById("userLogueado").innerHTML= 'Hola, ' + nomDeUsuer;
      </script>
      </div>
  </nav>
  <div class="text-center p-4">
    <h2>Mi Carrito</h2>
  </div>
  <!-- productos del carrito -->
  <div class="container align-middle align-center">
    <table id="cart-list-container" class="table" style="width:100%;"></table>
  </div>

  <div class="row justify-content-md-center">
    <div class="col-md-8 order-md-1">
      <h4 class="mb-3">Dirección del envío</h4>
  <form class="needs-validation" novalidate id="send-info">
    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="sendAdressStr">Calle</label>
        <input type="text" class="form-control" id="sendAdressStr" placeholder="" value="" required>
        <div class="invalid-feedback">
          Ingresa el nombre de tu calle
        </div>
      </div>
      <div class="col-md-2 mb-3">
        <label for="sendAdressNum">Número</label>
        <input type="number" class="form-control" id="sendAdressNum" placeholder="" value="" required>
        <div class="invalid-feedback">
          Ingresa el número
        </div>
      </div>
      <div class="col-md-4 mb-3">
        <label for="sendAdressCor">Esquina</label>
        <input type="text" class="form-control" id="sendAdressCor" placeholder="" value="" required>
        <div class="invalid-feedback">
          Ingresa el nombre de la esquina
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="sendAdressCity">Ciudad</label>
        <input type="text" class="form-control" id="sendAdressCity" placeholder="" value="" required>
        <div class="invalid-feedback">
          Ingresa la ciudad
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <label for="sendAdressCount">País</label>
        <input type="text" class="form-control" id="sendAdressCount" placeholder="" value="" required>
        <div class="invalid-feedback">
          Ingresa el país
        </div>
      </div>
    </div>
     
    <hr class="mb-4">
    <h5 class="mb-3">Tipo de envío</h5>
    <div class="d-block my-3">
      <div class="custom-control custom-radio">
        <input id="premiumradio" name="sendType" type="radio" class="custom-control-input"  required="" value=0.15>
        <label class="custom-control-label" for="premiumradio">Premium (2 a 5 días)</label>
      </div>
      <div class="custom-control custom-radio">
        <input id="expressradio" name="sendType" type="radio" class="custom-control-input" required="" value=0.07>
        <label class="custom-control-label" for="expressradio">Express (5 a 8 días)</label>
      </div>
      <div class="custom-control custom-radio">
        <input id="standardradio" name="sendType" type="radio" class="custom-control-input" required="" value=0.05>
        <label class="custom-control-label" for="standardradio">Standar (12 a 15 días)</label>
        <div class="invalid-feedback">
          Elija un tipo de envío
        </div>
      </div>
      <div class="row">
        <button type="button" class="m-1 btn btn-link" data-toggle="modal" data-target="#contidionsModal">Ver condiciones</button>
      </div>
    </div>
    <hr class="mb-4">
    <h4 class="mb-3">Costos</h4>
    <ul class="list-group mb-3">
        <li class="list-group-item d-flex justify-content-between lh-condensed">
          <div>
            <h6 class="my-0">Precio</h6>
            <small class="text-muted">Subtotal de los productos</small>
          </div>
          <span class="text-muted" id="productPrice">-</span>
        </li>
        <li class="list-group-item d-flex justify-content-between lh-condensed">
          <div>
            <h6 class="my-0">Envío</h6>
            <small class="text-muted">Según el tipo de envío</small>
          </div>
          <span class="text-muted" id="sendPrice">-</span>
        </li>
        <li class="list-group-item d-flex justify-content-between">
          <span>Total a pagar (USD)</span>
          <strong id="totalAPagar">-</strong>
        </li>
      </ul>
      <hr class="mb-4">
      <h5 class="mb-3">Formas de pago</h5>
      <p id="alertError"></p> 
      <div class="d-block my-3">
        <button type="button" class="m-1 btn btn-link" data-toggle="modal" data-target="#payModal">Seleccionar forma de pago</button>
      </div>
    <hr class="mb-4">
    <button class="boton btn btn-primary btn-lg" type="submit">Comprar</button>
  </form>
  
  <script>
    // Función que controla si hay campos inválidos
    (function() {
      'use strict';
      window.addEventListener('load', function() {
        
        var forms = document.getElementsByClassName('needs-validation');
        var pagoModal = document.getElementById('alertError');
        
        var validation = Array.prototype.filter.call(forms, function(form) {
          form.addEventListener('submit', function(event) {
            if ((form.checkValidity() === false) || (pagoModal.innerHTML === "No ha seleccionado medio de pago.")) {
              event.preventDefault();
              event.stopPropagation();
              Swal.fire({
                icon: 'error',
                title: 'Oops...Parece que algo ha fallado :(',
                text: 'Por favor verifica haber completado todos los campos del formulario.',
              })
            }
            if ((form.checkValidity() === true) && (pagoModal.innerHTML != "No ha seleccionado medio de pago.")){
              event.preventDefault();
              Swal.fire({
                title: '¡Tu compra ha sido exitosa!',
                text: 'Chequea tu email para recibir actualizaciones del envío.',
                imageUrl: 'img/login.png',
                imageWidth: 400,
                imageHeight: 200,
                imageAlt: 'Logo ecommerce',
              })
            }
            form.classList.add('was-validated');
          }, false);
        });
      }, false);
    })();
    </script>

  <footer class="text-muted">
    <div class="container">
        <p>Este sitio forma parte de Desarrollo Web - JAP - 2020</p>
        <p>Clickea <a target="_blank" href="Letra.pdf">aquí</a> para descargar la letra del obligatorio.</p>
    </div>
  </footer>

<!-- modal de forma de pago -->
<div class="modal fade" tabindex="-1" role="dialog" id="payModal">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Formas de Pago</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
          <form class="needs-validation" id="pay-info">
              <div class="form-row">
                <div class="custom-control custom-radio">
                  <input id="TjaCred" name="payType" type="radio" class="custom-control-input"  required="" value="Tarjeta de Crédito">
                  <label class="custom-control-label" for="TjaCred">Tarjeta de Crédito </label>
                  <img src="img/tarjetas.png" alt="">
                  <div id="datosTjaCred">
                  </div>
                </div>
              </div><br>
              <div class="form-row">  
                <div class="custom-control custom-radio">
                  <input id="TransBanc" name="payType" type="radio" class="custom-control-input" required=""  value="Transferencia Bancaria">
                  <label class="custom-control-label" for="TransBanc">Transferencia Bancaria </label>
                  <img src="img/banco.png" alt="" style="height: 25px;">
                  <div id="datosTransBanc">
                  </div>
                </div>
              </div><br>  
              <div class="modal-footer" id="pieDelModal">
                <button type="button" class="boton btn btn-primary"  data-dismiss="modal" id="aceptarPago" onclick="aceptarModal();">Aceptar</button>
            
              </div>
          </form>
        </div>
      </div>
      <script>
        function aceptarModal(){  

          let medioDePago = $('input[name="payType"]:checked').val();

          if (medioDePago == "Tarjeta de Crédito"){
            let obligatorio1 = document.getElementById("NombreTitular").value;
            let obligatorio2 = document.getElementById("NumTja").value;
            let obligatorio3 = document.getElementById("vtoTja").value;
            let obligatorio4 = document.getElementById("cvvTja").value;
            
            if (obligatorio1 != "" && obligatorio2 !="" && obligatorio3 != "" && obligatorio4 !=""){ 
              document.getElementById("alertError").innerHTML = `Ha seleccionado pagar mediante <span style="color:green;font-weight: bold;">` + medioDePago + `</span>.`;
            };
          };

          if (medioDePago == "Transferencia Bancaria"){
            let obligatorio5 = document.getElementById("NombreTitularCuenta").value;
            let obligatorio6 = document.getElementById("PaisCuenta").value;
            let obligatorio7 = document.getElementById("banco").value;
            let obligatorio8 = document.getElementById("NumCta").value;
            let obligatorio9 = document.getElementById("tipoCuenta").value;

            if  (obligatorio5 != "" && obligatorio6 !="" && obligatorio7 != "Selecciona tu banco..." && obligatorio8 !="" && obligatorio9 !="Selecciona el tipo de cuenta..."){
              document.getElementById("alertError").innerHTML = `Ha seleccionado pagar mediante <span style="color:green;font-weight: bold;">` + medioDePago + `</span>.`;
            };
          };
        }; 
      </script>
    </div>
  </div>
</div>  
<!-- modal de condiciones de envío -->
<div class="modal fade" tabindex="-1" role="dialog" id="contidionsModal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Condiciones de envío</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container">
            <div class="row">
                <h5 class="text-warning">Premium (2 a 5 días)</h5>
                <p class="muted text-justify">Tu compra llegará en un máximo de 5 días. Este tipo de envío tiene un costo asociado del <strong>15%</strong> del costo de los productos comprados.</p>
            </div>
            <hr>
            <div class="row">
                <h5 class="text-primary">Express (5 a 8 días)</h5>
                <p class="muted text-justify">Tu compra llegará en un plazo de 5 a 8 días. Este tipo de envío tiene un costo asociado del <strong>7%</strong> del costo de los productos comprados.</p>
            </div>
            <hr>
            <div class="row">
                <h5 class="text-secondary">Estándar (12 a 15 días)</h5>
                <p class="muted text-justify">Tu compra llegará en un plazo de 12 a 15 días. Este tipo de envío tiene un costo asociado del <strong>5%</strong> del costo de los productos comprados.</p>
            </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
  <div id="spinner-wrapper">
    <div class="lds-ring">
      <div></div>
      <div></div>
      <div></div>
      <div></div>
    </div>
  </div>
  <script src="js/jquery-3.4.1.min.js"></script>
  <script src="js/bootstrap.bundle.min.js"></script>
  <script src="js/dropzone.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
  <script src="js/init.js"></script>
  <script src="js/cart.js"></script>
</body>

</html>