<!DOCTYPE html>
<!-- saved from url=(0049)https://getbootstrap.com/docs/4.3/examples/album/ -->
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <title>eMercado - Todo lo que busques está aquí</title>

  <link rel="canonical" href="https://getbootstrap.com/docs/4.3/examples/album/">
  <link href="https://fonts.googleapis.com/css?family=Raleway:300,300i,400,400i,700,700i,900,900i" rel="stylesheet">

  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }
  </style>
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/styles.css" rel="stylesheet">
  <link href="css/dropzone.css" rel="stylesheet">
</head>

<body>
  <nav class="site-header sticky-top py-1 bg-dark">
    <div class="container d-flex flex-column flex-md-row justify-content-between">
      <a class="py-2 d-none d-md-inline-block" href="cover.html">Inicio</a>
      <a class="py-2 d-none d-md-inline-block" href="categories.html">Categorías</a>
      <a class="py-2 d-none d-md-inline-block" href="products.html">Productos</a>
      <a class="py-2 d-none d-md-inline-block" href="sell.html">Vender</a>
      <div> <!--menú desplegable en el nombre de usuario-->
        <div class="dropdown">
        <img src="" id="miniFoto" alt="" style="z-index: 5px; width: 22px; height: 25px; opacity: 70%;">
        <a class="py-2 d-none d-md-inline-block dropdown-toggle" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="userLogueado" style="color:white;"></a>
        <!-- puntos del menú: por ahora solo funciona el cerrar sesión,y la redirección del carrito -->
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <a class="dropdown-item" href="my-profile.html">Mi perfil</a>
            <a class="dropdown-item" href="cart.html">Mi carrito</a>
            <a class="dropdown-item" onclick="olvidar();" href="index.html">Cerrar Sesión</a>
          </div>
        </div>

      <script>//obtengo el usuario ingresado en el login
        var nomDeUsuer = localStorage.getItem("usuario");
		document.getElementById("userLogueado").innerHTML= 'Hola, ' + nomDeUsuer;
		//muestro la imagen al lado del desplegable del usuario
		document.addEventListener("DOMContentLoaded", function (){
			localStorage.setItem("ImgCargada", "");
			var silueta = "img/user.jpg";
			document.getElementById("miniFoto").src = silueta;
		});
		//cerrar sesión
		function olvidar(){
        localStorage.clear();
      };
      </script>
      </div>
    </div>
  </nav>
  <main>
	<div class="container d-flex flex-column flex-md-row justify-content-center">
				<div class="col-4">
					<div class="row">
						<div class="bg-light rounded text-align-center shadow-lg mt-5 p-3 mb-2 bg-white">
							<h3 id="usuarioLogueado" class="text-center"></h3>
							<p class="text-center">
								<button type="button" class="m-1 btn btn-link" data-toggle="modal" data-target="#passwordModal"><small>Cambiar Contraseña</small></button>
							</p>
							<div class="text-center">
								<img src="" class="rounded-circle" style="width:70%;" alt="Foto de Perfil" id="fotoPerfil">
							</div>
							<br>
							<div class="row justify-content-center">
								<button class="boton mt-2" type="button" data-toggle="modal" data-target="#cargarFoto">Cargar foto de perfil</button>
							</div>
							<br><br>
							<h5>Últimas compras</h5>
								<div class="container align-middle align-center">
									<div id="cart-list-container"></div>
								</div>
						</div>
					</div>
				</div>
				<div class="col-6">
					<div class="container bg-light shadow-lg p-3 mb-5 rounded mt-5">
						
						<ul class="nav nav-tabs nav-justified justify-content-around" role="tablist">
							<li class="nav-item"><a class="nav-link active" data-toggle="tab" href="#Miperfil">Perfil</a></li>
							<li class="nav-item"><a class="nav-link" data-toggle="tab" href="#MiDireccion">Dirección</a></li>
							<li class="nav-item"><a class="nav-link" data-toggle="tab" href="#MiFormaPago">Medios de Pago</a></li>
						</ul>
						<br>
						<div class="tab-content">
						<!--la clase "in active" es para que sea la tab activa-->
							<div id="Miperfil" class="tab-pane in active" role="tab">
								<h3>Editar perfil</h3>	
								<form class="needs-validation" novalidate id="send-info">
									<br>
									<div class="row">
									  <div class="col-md-6 mb-3">
										<label for="PrimerNom">Primer Nombre</label>
										<input type="text" class="form-control" id="PrimerNom" placeholder="" value="" required>
										<div class="invalid-feedback">
										  Ingresa tu primer nombre
										</div>
									  </div>
									  <div class="col-md-6 mb-3">
										<label for="SegundoNom">Segundo Nombre</label>
										<input type="text" class="form-control" id="SegundoNom" placeholder="" value="" required>
										<div class="invalid-feedback">
										  Ingresa tu segundo nombre
										</div>
									  </div>
									</div><br>
									<div class="row">
									  <div class="col-md-6 mb-3">
										<label for="PrimerApe">Primer Apellido</label>
										<input type="text" class="form-control" id="PrimerApe" placeholder="" value="" required>
										<div class="invalid-feedback">
										  Ingresa tu primer apellido
										</div>
									  </div>
									  <div class="col-md-6 mb-3">
										<label for="SegundoApe">Segundo Apellido</label>
										<input type="text" class="form-control" id="SegundoApe" placeholder="" value="" required>
										<div class="invalid-feedback">
										  Ingresa tu segundo apellido
										</div>
									  </div>
									</div><br>
									<div class="row">
									  <div class="col-md-6 mb-3">
										<label for="fechaNac">Fecha de nacimiento</label>
										<input type="date" class="form-control" id="fechaNac" placeholder="" value="" min="1910-01-01" max="2020-10-31" required>
										<div class="invalid-feedback">
										  Ingresa tu fecha de nacimiento
										</div>
									  </div>
									  <div class="col-md-3 mb-3">
										<label for="edad">Edad</label>
										<input type="number" class="form-control" id="edad" placeholder="" value="" min="1" max="110" required>
										<div class="invalid-feedback">
										  Ingresa tu edad
										</div>
									  </div>
									</div><br>
									<div class="row">
										<div class="col-md-4 mb-3">
											<label for="telef">Teléfono/Celular</label>
											<input type="tel" class="form-control" id="telef" placeholder="" value="" required>
											<div class="invalid-feedback">
											  Ingresa tu número de teléfono o celular
											</div>
										</div>
										<div class="col-md-6 mb-3">
										<label for="email">Correo electrónico</label>
										<input type="email" class="form-control" id="email" placeholder="" value="" required>
										<div class="invalid-feedback">
										  Ingresa tu e-mail
										</div>
									  </div>
									</div><br>
									<div class="row justify-content-end">
										<button id="guardarInfo" class="boton" type="submit">Actualizar datos</button>
									</div>
								</form>
							</div>
						<!--la clase "fade" es para el efecto de mostrarlo cuando se selecciona-->	
							<div id="MiDireccion" class="tab-pane fade" role="tab">
								<h3>Dirección de envío</h3>
									<form class="needs-validation" novalidate id="send-info">
										<br>
										<div class="row">
										  <div class="col-md-6 mb-3">
											<label for="sendAdressStr">Calle</label>
											<input type="text" class="form-control" id="sendAdressStr" placeholder="" value="" required>
											<div class="invalid-feedback">
											  Ingresa el nombre de tu calle
											</div>
										  </div>
										  <div class="col-md-4 mb-3">
											<label for="sendAdressNum">Número</label>
											<input type="number" class="form-control" id="sendAdressNum" placeholder="" value="" required>
											<div class="invalid-feedback">
											  Ingresa el número
											</div>
										  </div>
										</div><br>
										<div class="row">
										  <div class="col-md-6 mb-3">
											<label for="sendAdressCor1">Entre Calle 1</label>
											<input type="text" class="form-control" id="sendAdressCor1" placeholder="" value="" required>
											<div class="invalid-feedback">
											  Ingresa el nombre de la calle
											</div>
										  </div>
										  <div class="col-md-6 mb-3">
											<label for="sendAdressCor2"> y Calle 2</label>
											<input type="text" class="form-control" id="sendAdressCor2" placeholder="" value="" required>
											<div class="invalid-feedback">
											  Ingresa el nombre de la calle
											</div>
										  </div>
										</div><br>
										<div class="row">
										  <div class="col-md-6 mb-3">
											<label for="sendAdressCity">Ciudad</label>
											<input type="text" class="form-control" id="sendAdressCity" placeholder="" value="" required>
											<div class="invalid-feedback">
											  Ingresa la ciudad
											</div>
										  </div>
										  <div class="col-md-6 mb-3">
											<label for="sendAdressCount">País</label>
											<input type="text" class="form-control" id="sendAdressCount" placeholder="" value="" required>
											<div class="invalid-feedback">
											  Ingresa el país
											</div>
										  </div>
										</div><br>
										<div class="row">
											<div class="col-md-4 mb-3">
												<label for="postalCode">Código Postal</label>
												<input type="number" class="form-control" id="postalCode" placeholder="" value="" required>
												<div class="invalid-feedback">
												  Ingresa el código postal
												</div>
											</div>
										</div><br>
										<div class="row justify-content-end">
											<button id="guardarInfo" class="boton" type="submit">Actualizar datos</button>
										</div>
									</form>
							</div>
							<div id="MiFormaPago" class="tab-pane fade" role="tab">
								<h3>Forma de pago</h3>
								<br>
								<form class="needs-validation" id="pay-info">
									<p><b>Tarjeta de Crédito </b>
									  <img src="img/tarjetas.png" alt="" style="height: 25px;"></p>    
										<div class="row">
										  <div class="col-md-6 mb-2">
											<label for="NombreTitular">Nombre del titular</label>
											<input type="text" class="form-control" id="NombreTitular" placeholder="" value="" required>
										  </div>
										  <div class="col-md-6 mb-2">
											<label for="NumTja">Número de la tarjeta</label>
											<input type="number" class="form-control" id="NumTja" placeholder="" value="" min= 10000000000000 max=99999999999999 required>
										  </div>
										</div>
										<div class="row">
										  <div class="col-md-4 mb-2">
											<label for="vtoTja">Vencimiento</label>
											<input type="month" class="form-control" id="vtoTja" placeholder="mm/yy" value="" required>
										  </div>
										  <div class="col-md-4 mb-2">
										  <label for="cvvTja">CVV</label>
										  <input type="number" class="form-control" id="cvvTja" placeholder="" value="" min= 100 max=999 required>
										  </div>
										</div>
									<br>
									<p><b>Transferencia Bancaria </b>
									  <img src="img/banco.png" alt="" style="height: 25px;"></p>
										<div class="row">
										  <div class="col-md-8 mb-2">
											<label for="NombreTitularCuenta">Nombre del titular</label>
											<input type="text" class="form-control" id="NombreTitularCuenta" placeholder="" value="" required>
										  </div>
										</div>
										<div class="row">
										  <div class="col-md-6 mb-2">
											  <label for="PaisCuenta">País de la cuenta</label>
											  <input type="text" class="form-control" id="PaisCuenta" placeholder="" value="" required>
										  </div>
										  <div class="col-md-6 mb-2">
											  <label for="banco">Banco</label>
											  <select name="tuBanco" class="form-control" id="banco" placeholder="" value="" required>
												  <option></option>
												  <option>BBVA</option>
												  <option>BROU</option>
												  <option>HSBC</option>
												  <option>Itaú</option>
												  <option>Santander</option>
												  <option>Scotiabank</option>
											  </select>
										  </div>
										</div>
										<div class="row">
										  <div class="col-md-6 mb-2">
											<label for="NumCta">Número de cuenta</label>
											<input type="number" class="form-control" id="NumCta" placeholder="" value="" min= 10000000000000 max=99999999999999 required>
										  </div>
										  <div class="col-md-6 mb-2">
										  <label for="tipoCuenta">Tipo de cuenta</label>
										  <select name="tipoCuenta" class="form-control" id="tipoCuenta" placeholder="" value="" required>
											  <option></option>
											  <option>Caja de ahorro ($)</option>
											  <option>Caja de ahorro (USD)</option>
											  <option>Cuenta corriente ($)</option>
											  <option>Cuenta corriente (USD)</option>
										  </select>
										  </div>
										</div>
				
									<div class="row justify-content-end">
										<button type="button" class="boton btn btn-primary">Confirmar datos</button>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			
	</div>	
		
	
	<script>//obtengo el usuario ingresado en el login
        var nomDeUsuer = localStorage.getItem("usuario");
		document.getElementById("usuarioLogueado").innerHTML= `<b>`+ nomDeUsuer + `</b>`;
    </script>
  </main>
  
  <footer class="text-muted bg-light">
    <div class="container">
      <p>Este sitio forma parte de Desarrollo Web - JAP - 2020</p>
      <p>Clickea <a target="_blank" href="Letra.pdf">aquí</a> para descargar la letra del obligatorio.</p>
    </div>
  </footer>
  
  
  <!-- modal de cambio de contraseña -->
<div class="modal fade" tabindex="-1" role="dialog" id="passwordModal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cambio de contraseña</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container">
            <div class="row">
				<label for="OldPass">Contraseña actual</label>
				<input type="password" class="form-control" id="OldPass" placeholder="" value="" required>
				<div class="invalid-feedback">
				  Ingresa tu contraseña actual
				</div>
			</div>
			<br>
			<div class="row">
				<label for="NewPass">Nueva contraseña</label>
				<input type="password" class="form-control" id="NewPass" placeholder="" value="" required>
				<div class="invalid-feedback">
				  Ingresa la nueva contraseña
				</div>
		    </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary boton" data-dismiss="modal">Actualizar datos</button>
      </div>
    </div>
  </div>
  <script>
  //guarda la contraseña nueva
	function guardarPass(){
	
		var newpass = document.getElementById("NewPass").value
		var oldpass = localStorage.getItem("contraseña");
		
		if (newpass != '' && newpass != oldpass){
			//para ver si la nueva contraseña cumple con la longitud deseada
			if (newpass.length < 1 && newpass.length > 10){
				newpass.classList.add("invalid-feedback")
			}else{
			//guardo la nueva contraseña en el localstorage
			localStorage.setItem("contraseña", newpass);
			}
		} 
	}
  </script>
</div>

<!-- modal de subida de imagen -->
<div class="modal fade" tabindex="-1" role="dialog" id="cargarFoto">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cargar foto de perfil</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container">
            <div class="row">
				<div class="bg-light rounded mt-3 mb-3 mx-auto">
					<div class="mx-auto text-center">
						<img src="" class="rounded-circle" style="width:70%;" alt="Previsualización de imagen" id="prevImg">
					</div>
				</div>
			</div>
			<br>
			<div class="row">
				<label for="urlImg">URL de la imagen: </label>
				<input type="url" class="form-control" id="urlImg" placeholder="Ingresa la URL de la imagen" value="" required>
				<div class="invalid-feedback">
				  Ingresa la dirección de la foto con formato URL
				</div>
			</div>
			<br>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary boton" onclick="cargarNuevaFoto();" data-dismiss="modal">Cargar foto</button>
      </div>
    </div>
  </div>
  <script>
	document.getElementById("cargarFoto").addEventListener("loaded", function() {

		let fotoPerfil = document.getElementById("urlImg").value;
		document.getElementById("prevImg").src = fotoPerfil;
	});
  //para mostrar una previsualización de la imagen
	document.getElementById("urlImg").addEventListener("change", function() {
	
		var urlFoto = document.getElementById("urlImg").value;
		document.getElementById("prevImg").src = urlFoto;
	});
	//para cargar la nueva foto
	function cargarNuevaFoto(){

		var urlFoto = document.getElementById("urlImg").value;
		if (urlFoto != ""){
		document.getElementById("fotoPerfil").src = urlFoto;
		localStorage.setItem('ImgPerfil', urlFoto); 
		localStorage.setItem('ImgCargada', 'cargada');
		document.getElementById("miniFoto").src = urlFoto;
		}
	}
  </script>
</div>

  <div id="spinner-wrapper">
    <div class="lds-ring">
      <div></div>
      <div></div>
      <div></div>
      <div></div>
    </div>
  </div>
  <script src="js/jquery-3.4.1.min.js"></script>
  <script src="js/bootstrap.bundle.min.js"></script>
  <script src="js/dropzone.js"></script>
  <script src="js/init.js"></script>
  <script src="js/my-profile.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
</body>

</html>